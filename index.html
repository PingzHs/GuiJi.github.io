<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£²æ–™è£½ä½œå°éŠæˆ²</title>
    <title>jQuery UI Dialog - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
        $(function() {
$( "#dialog" ).dialog({
modal: true,
buttons: {
Ok: function() {
$( this ).dialog( "close" );
}
}
});
});
        const drinksData = [
            
        {
        "å“å": "ç´…/ç¶ /æ™®æ´±",
        "å†°": "å°–",
        "ç³–": 12,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 240
        },
        "å»ç³–é€€æª”": "è¦"

    },
    {
        "å“å": "çç   ç´…/ç¶ /æ™®æ´±",
        "å†°": "å¹³",
        "ç³–": 10,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 180
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "ä¸‰éŸ»/å››å­£æ˜¥/èŠ±æ²«çƒ",
        "å†°": "å°–",
        "ç³–": 10,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 240
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "ä¸‰åä¸‰èŒ¶ç‹",
        "å†°": "å°–",
        "ç³–": 10,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 240
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "ç´…æ°´çƒé¾",
        "å†°": "å¹³",
        "ç³–": 10,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 350,
            "æ°´": 50
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "ç†±åŸç´”èŒ¶(å»/å»)",
        "å†°": "0",
        "ç³–": 0,
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 300,
            "æ°´": 60
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "é˜¿æºæ¥Šæ¡ƒ(ç´…/ç¶ )",
        "å†°": "å°–",
        "ç³–": 3,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 3,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 150,
            "æ°´": 50,
            "æ¥Šæ¡ƒ": 80
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "æ¥Šæ¡ƒé›·å­Ÿ",
        "å†°": "å°–",
        "ç³–": 5,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 3,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 50,
            "æ°´": 150,
            "æ¥Šæ¡ƒ": 80
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "å†¬ç“œé›·å­Ÿ",
        "å†°": "å¹³",
        "ç³–": 5,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "æª¸æª¬ 30 (å›æ”¾)",
        "æˆåˆ†": {
            "æ°´": 250,
            "å†¬ç“œ": 50
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "å†¬ç“œèŒ¶ç‹",
        "å†°": "å¹³",
        "ç³–": 4,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "æ°´": 150,
            "èŒ¶": 100,
            "å†¬ç“œ": 50
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "è±†æ¼¿ç´…èŒ¶",
        "å†°": "å¹³",
        "ç³–": 11,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 150,
            "è±†æ¼¿": 250
        },
        "å»ç³–é€€æª”": "ä¸è¦"
        
    },
    {
        "å“å": "ç”˜è”—å››å­£æ˜¥",
        "å†°": "å¹³",
        "ç³–": 9,
	"æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 160,
            "ç”˜è”—": 140
        },
        "å»ç³–é€€æª”": "æœ€ä½ä¸€åˆ†ç³–"
    },
    {
        "å“å": "å¥¶èŒ¶\n(ç´…/ç¶ /èŒ¶ç‹)",
        "å†°": "å°–",
        "ç³–": 11,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 220,
            "å¥¶ç²¾": 3
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "ç¢éŠ€æ™®æ´±å¥¶èŒ¶",
        "å†°": "å°–",
        "ç³–": 11,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 200,
            "å¥¶ç²¾": 4
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "çç å¥¶èŒ¶\n(ç´…/ç¶ /èŒ¶ç‹)",
        "å†°": "å¹³",
        "ç³–": 9,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "çç   140Â±5 å…‹",
        "æˆåˆ†": {
            "èŒ¶": 180,
            "å¥¶ç²¾": 3
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "ç¢éŠ€æ™®æ´±çç å¥¶èŒ¶",
        "å†°": "å¹³",
        "ç³–": 8,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "çç   140Â±5 å…‹",
        "æˆåˆ†": {
            "èŒ¶": 180,
            "å¥¶ç²¾": 3
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "é®®æœç™¾é¦™(ç´…/ç¶ )",
        "å†°": "å¹³",
        "ç³–": 15,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç™¾é¦™  60",
        "æˆåˆ†": {
            "èŒ¶": 200
        },
        "å»ç³–é€€æª”": "æœ€ä½ä¸€åˆ†ç³–"
    },
    {
        "å“å": "ç¿¡ç¿ é›·å¤¢",
        "å†°": "å°–",
        "ç³–": 16,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "æª¸æª¬ 50 (å›æ”¾)",
        "æˆåˆ†": {
            "èŒ¶": 200
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "é¦™æŸšé›·å¤¢ç¶ ",
        "å†°": 8,
        "ç³–": 7,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 3,
        "æ¯å…§å‰¯æ–™": "è˜†è–ˆ 80Â±5g",
        "æˆåˆ†": {
            "èŒ¶": 170,
            "æ°´": 30,
            "æª¸æª¬": 20,
            "æŸšå­": 2
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "é¦™æŸšé›·å­Ÿç¶ (å»å†°)",
        "å†°": 5,
        "ç³–": 7,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 3,
        "æ¯å…§å‰¯æ–™": "è˜†è–ˆ 80Â±5g",
        "æˆåˆ†": {
            "èŒ¶": 170,
            "æ°´": 30,
            "æª¸æª¬": 20,
            "æŸšå­": 2
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "æŸ³ä¸ç¿¡ç¿ ",
        "å†°": "å¹³",
        "ç³–": 13,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "æŸ³ä¸": 140,
            "èŒ¶": 140
        },
        "å»ç³–é€€æª”": "æœ€ä½ä¸€åˆ†ç³–"
    },
    {
        "å“å": "è˜‹æœç´…è±",
        "å†°": "å¹³",
        "ç³–": 11,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "è˜‹æœ": 140,
            "èŒ¶": 160
        },
        "å»ç³–é€€æª”": "æœ€ä½ä¸€åˆ†ç³–"
    },
    {
        "å“å": "ç´…æŸšç¿¡ç¿ ",
        "å†°": 8,
        "ç³–": 9,
	"æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç´…æŸš 150",
        "æˆåˆ†": {
            "èŒ¶": 170
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "æ—ºæ¢¨å››å­£æ˜¥",
        "å†°": "å¹³",
        "ç³–": 12,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 160,
            "é³³æ¢¨": 100
        },
        "å»ç³–é€€æª”": "æœ€ä½ä¸€åˆ†ç³–"
    },
    {
        "å“å": "è‘¡è–ˆå››å­£æ˜¥",
        "å†°": "å¹³",
        "ç³–": 12,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "è˜†è–ˆ 110Â±5g",
        "æˆåˆ†": {
            "èŒ¶": 160,
            "è‘¡è„": 80
        },
        "å»ç³–é€€æª”": "æœ€ä½ä¸€åˆ†ç³–"
    },
    {
        "å“å": "èœœæ¡ƒçƒé¾",
        "å†°": "å¹³",
        "ç³–": 10,
        "æ¢ä»¶": "å„åŠ",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "èœœæ¡ƒ 100",
        "æˆåˆ†": {
            "èŒ¶": 200
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "é®®ä¹³èŒ¶\n(ç´…/ç¶ )",
        "å†°": 8,
        "ç³–": 12,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 250,
            "é®®å¥¶": 150
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "ç¢éŠ€æ™®æ´±é®®ä¹³",
        "å†°": "å°–",
        "ç³–": 12,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 200,
            "é®®å¥¶": 150
        },
        "å»ç³–é€€æª”": "è¦"
    },
    {
        "å“å": "å†¬ç“œé®®ä¹³",
        "å†°": "å¹³",
        "ç³–": 3,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "æ°´": 150,
            "å†¬ç“œ": 50,
            "é®®å¥¶": 150
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "é®®ä¹³èŒ¶\n(æ¿ƒä¹³/ç´…çƒ)",
        "å†°": 8,
        "ç³–": 12,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 1,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 300,
            "é®®å¥¶": 150
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "å·§å…‹é®®ä¹³èŒ¶",
        "å†°": 8,
        "ç³–": 12,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "å·§å…‹åŠ›æ°´": 100,
            "æ¿ƒä¹³": 150,
            "é®®å¥¶": 120
        },
        "å»ç³–é€€æª”": "æœ€ä½ä¸€åˆ†ç³–"
    },
    {
        "å“å": "èœ‚èœœç¶ èŒ¶",
        "å†°": "å°–",
        "ç³–": 0,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "æ°´": 100,
            "èŒ¶": 140,
            "èœœ": 40
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "èœ‚èœœå››å­£æ˜¥",
        "å†°": "å°–",
        "ç³–": 0,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "èŒ¶": 280,
            "èœœ": 40
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "èœ‚èœœé›·å¤¢",
        "å†°": "å°–",
        "ç³–": 8,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 3,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "æ°´": 210,
            "èœœ": 40,
            "æª¸æª¬": 30
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "é›·å¤¢è˜†è–ˆèœœ",
        "å†°": "å¹³",
        "ç³–": 7,
        "æ¢ä»¶": "æ°´",
        "æª”é€Ÿ": 3,
        "æ¯å…§å‰¯æ–™": "è˜†è–ˆ 110Â±5g",
        "æˆåˆ†": {
            "æ°´": 160,
            "èœœ": 40,
            "æª¸æª¬": 30
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    },
    {
        "å“å": "ä¸‰éŸ»å¥¶èŒ¶",
        "å†°": "å°–",
        "ç³–": 0,
        "æ¢ä»¶": "èŒ¶",
        "æª”é€Ÿ": 2,
        "æ¯å…§å‰¯æ–™": "ç„¡",
        "æˆåˆ†": {
            "æ°´": 40,
            "èœœ": 40,
            "èŒ¶": 220,
            "å¥¶ç²¾": 2
        },
        "å»ç³–é€€æª”": "ä¸è¦"
    }


        ];

        const iceOptions = ["æ­£å¸¸", "å°‘å†°", "å¾®å†°", "å»å†°"];
        const sugarOptions = ["æ­£å¸¸", "å…«åˆ†", "åŠç³–", "ä¸‰åˆ†", "ä¸€åˆ†", "å»ç³–"];
        const milkReductionItems = new Set([
    "é®®ä¹³èŒ¶\n(ç´…/ç¶ )",
    "ç¢éŠ€æ™®æ´±é®®ä¹³",
    "å†¬ç“œé®®ä¹³",
    "é®®ä¹³èŒ¶\n(æ¿ƒä¹³/ç´…çƒ)",
    "å·§å…‹é®®ä¹³èŒ¶"
]);

        let currentQuestion = {};
        let ac = 0;
        let cc = 0;

function getRandomQuestion() {
            const randomDrink = drinksData[Math.floor(Math.random() * drinksData.length)];
            const randomIce = iceOptions[Math.floor(Math.random() * iceOptions.length)];
            let randomSugar = sugarOptions[Math.floor(Math.random() * sugarOptions.length)];

// å®šç¾©ä¸èƒ½é¸æ“‡ "å»ç³–" çš„å“å
const noSugarDrinks = [
    "ç”˜è”—å››å­£æ˜¥",
    "é®®æœç™¾é¦™(ç´…/ç¶ )",
    "æŸ³ä¸ç¿¡ç¿ ",
    "è˜‹æœç´…è±",
    "æ—ºæ¢¨å››å­£æ˜¥",
    "è‘¡è–ˆå››å­£æ˜¥",
    "å·§å…‹é®®ä¹³èŒ¶"
];
	const fixedSugarDrinks = [
    "èœ‚èœœç¶ èŒ¶",
    "èœ‚èœœå››å­£æ˜¥",
    "ä¸‰éŸ»å¥¶èŒ¶"
];

// æª¢æŸ¥æ˜¯å¦å±¬æ–¼é™åˆ¶å“åï¼Œè‹¥æ˜¯ä¸” sugar ç‚º "å»ç³–"ï¼Œå‰‡é‡æ–°é¸æ“‡
if (noSugarDrinks.includes(randomDrink.å“å) && randomSugar === "å»ç³–") {
    // éæ¿¾æ‰ "å»ç³–" é¸é …ï¼Œé‡æ–°é¸æ“‡
    const filteredSugarOptions = sugarOptions.filter(sugar => sugar !== "å»ç³–");
    randomSugar = filteredSugarOptions[Math.floor(Math.random() * filteredSugarOptions.length)];
}
            function getWeightedRandom() {
    const rand = Math.random();
    if (rand < 0.7) return 0; // 70% æ©Ÿç‡é¸ 0
    else if (rand < 0.9) return 1; // 15% æ©Ÿç‡é¸ 1
    else return 2; // 15% æ©Ÿç‡é¸ 2
}
			const randomNumber = getWeightedRandom(); // ç”¢ç”ŸåŠ æ¬Šéš¨æ©Ÿæ•¸
            if (randomDrink.å“å === "ç†±åŸç´”èŒ¶(å»/å»)") {
    			currentQuestion = { ...randomDrink, å†°å¡Š: "å»å†°", ç”œåº¦: "å»ç³–", åŠ æ–™: randomNumber };
			} else if(fixedSugarDrinks.includes(randomDrink.å“å)){
		    	currentQuestion = { ...randomDrink, å†°å¡Š: randomIce, ç”œåº¦: "å›ºå®š", åŠ æ–™: randomNumber };
			}else {
    			currentQuestion = { ...randomDrink, å†°å¡Š: randomIce, ç”œåº¦: randomSugar, åŠ æ–™: randomNumber };
			} 
            document.getElementById("drink-name").textContent = currentQuestion.å“å;
            document.getElementById("ice-option").textContent = currentQuestion.å†°å¡Š;
            document.getElementById("sugar-option").textContent = currentQuestion.ç”œåº¦;
            document.getElementById("add-option").textContent = currentQuestion.åŠ æ–™;
        }

        
        
		
        function adjustSugar(sugarOption) {
            switch (sugarOption) {
                case "å…«åˆ†": return -1;
                case "åŠç³–": return -2;
                case "ä¸‰åˆ†": return -3;
                case "ä¸€åˆ†": return -5;
                case "å»ç³–": return -currentQuestion.ç³–;
                default: return 0;
            }
        }

        function adjustTeaAndWater(option, amount) {
            if (option === "èŒ¶") return { èŒ¶: amount, æ°´: 0 };
            if (option === "å„åŠ") return { èŒ¶: amount / 2, æ°´: amount / 2 };
            return { èŒ¶: 0, æ°´: amount };
        }

        function checkAnswer() {
    const selectedOptions = {
        å†°å¡Š: document.getElementById("å†°å¡Šé¸æ“‡").value,
        ç”œåº¦: parseInt(document.getElementById("ç”œåº¦").value) || 0,
        æ¢ä»¶: document.querySelector("input[name='æ¢ä»¶']:checked")?.value || "",
        å»ç³–é€€æª”: document.querySelector("input[name='å»ç³–é€€æª”']:checked")?.value || "",
        æª”é€Ÿ: parseInt(document.getElementById("æª”é€Ÿ").value) || 0,
        æ¯å…§å‰¯æ–™: document.getElementById("æ¯å…§å‰¯æ–™").value || ""
    };

    const teaIngredients = ["èŒ¶", "æ°´", "æ¥Šæ¡ƒ", "å†¬ç“œ", "è±†æ¼¿", "ç”˜è”—", "å¥¶ç²¾", "æª¸æª¬", "æŸšå­", "æŸ³ä¸", "è˜‹æœ", "é³³æ¢¨", "è‘¡è„", "é®®å¥¶", "æ¿ƒä¹³", "èœœ", "å·§å…‹åŠ›æ°´", "æ¿ƒä¹³"];

    // è®€å–æ‰€æœ‰èŒ¶æ¹¯æˆåˆ†
    for (let ingredient of teaIngredients) {
        selectedOptions[`èŒ¶æ¹¯_${ingredient}`] = parseInt(document.getElementById(`èŒ¶æ¹¯_${ingredient}`)?.value) || 0;
    }

    let correct = true;
    let correctAnswer = "";

    // å†°å¡Šæ¯”å°
    let selectedIce = document.getElementById("å†°å¡Šé¸æ“‡").value;
if (selectedIce === "æ•¸å­—") {
    selectedIce = document.getElementById("å†°å¡Šæ•¸å­—").value;
}

// ç¢ºä¿å‹åˆ¥ä¸€è‡´
const correctIce = String(currentQuestion.å†°);
if (String(selectedIce) !== correctIce) {
    correct = false;
    correctAnswer += `å†°å¡Š: ${correctIce}\n`;
}


    // ç”œåº¦æ¯”å°
    let sugarAdjustment = adjustSugar(currentQuestion.ç”œåº¦);
    if (currentQuestion.åŠ æ–™ !== 0) {
    sugarAdjustment -= currentQuestion.åŠ æ–™;
}
    let adjustedSugar = (currentQuestion.ç³– || 0) + sugarAdjustment;
    if (Number.isNaN(adjustedSugar) || adjustedSugar < 0) adjustedSugar = 0;
	

    if (selectedOptions.ç”œåº¦ !== adjustedSugar) {
        correct = false;
        correctAnswer += `ç”œåº¦: ${adjustedSugar}\n`;
    }

    // **èŒ¶èˆ‡æ°´çš„èª¿æ•´**
    let teaAdjustment = 0, waterAdjustment = 0, milkAdjustment = 0;

// ç”œåº¦å½±éŸ¿ï¼ˆå¦‚æœä¸æ˜¯"æ­£å¸¸"ï¼‰
if (currentQuestion.ç”œåº¦ !== "æ­£å¸¸" && currentQuestion.ç”œåº¦ !== "å›ºå®š") {
    const adjustment = adjustTeaAndWater(currentQuestion.æ¢ä»¶, 20);
    teaAdjustment += adjustment.èŒ¶;
    waterAdjustment += adjustment.æ°´;
}

// å†°å¡Šå½±éŸ¿ï¼ˆå¦‚æœä¸æ˜¯"æ­£å¸¸"ï¼‰
if (currentQuestion.å†°å¡Š !== "æ­£å¸¸") {
    const adjustment = adjustTeaAndWater(currentQuestion.æ¢ä»¶, 20);
    teaAdjustment += adjustment.èŒ¶;
    waterAdjustment += adjustment.æ°´;
}

// é¡å¤–æ¢ä»¶ï¼šå¦‚æœæ˜¯ã€Œå»å†°ã€ï¼Œå†é¡å¤–åŠ  40
if (currentQuestion.å†°å¡Š === "å»å†°") {
    const adjustment = adjustTeaAndWater(currentQuestion.æ¢ä»¶, 20);
    teaAdjustment += adjustment.èŒ¶;
    waterAdjustment += adjustment.æ°´;
}

// é¡å¤–æ¢ä»¶ï¼šå¦‚æœæ˜¯ã€Œå»ç³–ã€ï¼Œå†é¡å¤–åŠ  40
if (currentQuestion.ç”œåº¦ === "å»ç³–") {
    const adjustment = adjustTeaAndWater(currentQuestion.æ¢ä»¶, 20);
    teaAdjustment += adjustment.èŒ¶;
    waterAdjustment += adjustment.æ°´;
}

if (currentQuestion.åŠ æ–™ > 0) {
    const adjustment = adjustTeaAndWater(currentQuestion.æ¢ä»¶, -40);
    teaAdjustment += adjustment.èŒ¶;
    waterAdjustment += adjustment.æ°´;
}
if (milkReductionItems.has(currentQuestion.å“å) && currentQuestion.åŠ æ–™ > 0) {
    milkAdjustment = -20 * currentQuestion.åŠ æ–™; 
}

    const correctTea = (currentQuestion?.æˆåˆ†?.èŒ¶ || 0) + teaAdjustment;
const correctWater = (currentQuestion?.æˆåˆ†?.æ°´ || 0) + waterAdjustment;
const correctMilk = Math.max(0, (currentQuestion?.æˆåˆ†?.é®®å¥¶ || 0) + milkAdjustment); // ç¢ºä¿ä¸ç‚ºè² æ•¸



// ğŸ”¹ **æ¯”å°æ‰€æœ‰å…¶ä»–æˆåˆ†**
for (let ingredient in currentQuestion.æˆåˆ†) {
        let selectedAmount = selectedOptions[`èŒ¶æ¹¯_${ingredient}`] || 0;
        let correctAmount = currentQuestion.æˆåˆ†[ingredient] || 0;

        // âœ… **å¦‚æœæ˜¯é®®ä¹³ï¼Œå‰‡ä½¿ç”¨ `correctMilk` é€²è¡Œæ¯”å°**
	    if (ingredient === "èŒ¶") {
            correctAmount = correctTea; 
        }
	    if (ingredient === "æ°´") {
            correctAmount = correctWater; 
        }
        if (ingredient === "é®®å¥¶") {
            correctAmount = correctMilk; 
        }

        if (selectedAmount !== correctAmount) {
            correct = false;
            correctAnswer += `${ingredient}: ${correctAmount}\n`;
        }
    
}


    // å…¶ä»–é …ç›®æ¯”å°
    let correctSpeed = parseInt(currentQuestion.æª”é€Ÿ, 10) || 0;

// å¦‚æœç³– = "å»ç³–" ä¸” "å»ç³–é€€æª”" = "è¦"ï¼Œå‰‡æª”é€Ÿè¦ -1
if (currentQuestion.ç”œåº¦ === "å»ç³–" && currentQuestion.å»ç³–é€€æª” === "è¦") {
    correctSpeed -= 1;
}

for (let key of ["æ¢ä»¶", "æª”é€Ÿ", "æ¯å…§å‰¯æ–™"]) {
    let correctValue = key === "æª”é€Ÿ" ? correctSpeed : currentQuestion[key];

    if ((selectedOptions[key] || "") !== (correctValue || "")) {
        correct = false;
        correctAnswer += `${key}: ${correctValue}\n`;
    }
}

if (correct) {
    alert("ç­”å°äº†ï¼ä¸‹ä¸€é¡Œ");
    cc++;
    ac++;
    getRandomQuestion();

    // æª¢æŸ¥ cc æ˜¯å¦èƒ½æ•´é™¤ 5
    if (ac % 5 === 0) {
        // é¡¯ç¤ºåœ–ç‰‡å°è©±æ¡†
        $("<div title='æ­å–œï¼ç´¯ç©ç­”å°: " + ac + "é¡Œ'></div>")
            .html("<img src='image/good.jpg' alt='Congratulations' width='500' height='500' />")  // æ›¿æ›ç‚ºä½ åœ–ç‰‡çš„ URL
            .dialog({
                modal: true,
                width: 600,    // è¨­ç½®å°è©±æ¡†å¯¬åº¦
                height: 600,   // è¨­ç½®å°è©±æ¡†é«˜åº¦
                position: {    // è¨­ç½®å°è©±æ¡†å±…ä¸­
                    my: "center",  
                    at: "center", 
                    of: window
                },
                buttons: {
                    "OK": function() {
                        $(this).dialog("close");
                    }
                }
            });
    }
} else {
    alert("ç­”éŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆ:\n" + correctAnswer);
    cc = 0;
    getRandomQuestion();
}
    document.getElementById("å†°å¡Šé¸æ“‡").value = "å°–";  // é‡ç½®å†°å¡Šé¸æ“‡
    document.getElementById("å†°å¡Šæ•¸å­—").value = "";     // æ¸…ç©ºå†°å¡Šæ•¸å­—
    document.getElementById("å†°å¡Šæ•¸å­—").style.display = "none";  // éš±è—æ•¸å­—è¼¸å…¥æ¡†
    document.getElementById("ç”œåº¦").value = "";          // æ¸…ç©ºç”œåº¦
    document.getElementById("æª”é€Ÿ").value = "";          // æ¸…ç©ºæª”é€Ÿ
    document.getElementById("æ¯å…§å‰¯æ–™").value = "ç„¡";    // é‡ç½®æ¯å…§å‰¯æ–™
	document.getElementById("èŒ¶æ¹¯_èŒ¶").value = "";
    document.getElementById("èŒ¶æ¹¯_æ°´").value = "";
    document.getElementById("èŒ¶æ¹¯_æ¥Šæ¡ƒ").value = "";
    document.getElementById("èŒ¶æ¹¯_å†¬ç“œ").value = "";
    document.getElementById("èŒ¶æ¹¯_è±†æ¼¿").value = "";
    document.getElementById("èŒ¶æ¹¯_ç”˜è”—").value = "";
    document.getElementById("èŒ¶æ¹¯_å¥¶ç²¾").value = "";
    document.getElementById("èŒ¶æ¹¯_æª¸æª¬").value = "";
    document.getElementById("èŒ¶æ¹¯_æŸšå­").value = "";
    document.getElementById("èŒ¶æ¹¯_æŸ³ä¸").value = "";
    document.getElementById("èŒ¶æ¹¯_è˜‹æœ").value = "";
    document.getElementById("èŒ¶æ¹¯_é³³æ¢¨").value = "";
	document.getElementById("èŒ¶æ¹¯_è‘¡è„").value = "";
    document.getElementById("èŒ¶æ¹¯_é®®å¥¶").value = "";
    document.getElementById("èŒ¶æ¹¯_æ¿ƒä¹³").value = "";
	document.getElementById("èŒ¶æ¹¯_èœœ").value = "";
    document.getElementById("èŒ¶æ¹¯_å·§å…‹åŠ›æ°´").value = "";
}

    </script>
</head>
<style>
    body {
    background-image: url('image/background.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

.container {
    background-color: rgba(255, 255, 255, 0.8);
    padding: 10px;
    border-radius: 10px;
    max-width: 90%;
    margin: 10px auto;
    position: relative;
}

.container img {
    position: absolute;
    top: 0;
    left: 0;
    width: 350px;
    height: 150px;
    z-index: 1;
}

#drink-name, .options {
    position: absolute;
    top: 20px;
    left: 45px;
    z-index: 2;
}

.options {
    margin-top: 40px;
    display: flex;
}
.options p {
        margin-right: 20px;
    }
/* ä¸‹é¢çš„å€å¡Šè·é›¢åœ–ç‰‡ä¸‹æ–¹çš„é–“è· */
.content {
    margin-top: 120px; /* é€™å€‹æ•¸å€¼æ ¹æ“šéœ€è¦èª¿æ•´ï¼Œä¿è­‰åœ–ç‰‡ä¸‹æ–¹æœ‰é©ç•¶çš„é–“è· */
    padding: 10px;
}

.stats {
    position: absolute;
    top: 50px;
    right: 10px;
    text-align: right;
}

input[type="number"] {
    width: 45%; 
    margin-bottom: 10px; 
    padding: 5px; 
    font-size: 12px; 
}

</style>

<body onload="getRandomQuestion()">
    <div class="container">
        
        <img src="image/note.png" alt="é¡Œç›®"> 
        <h2 id="drink-name">éš¨æ©Ÿé£²æ–™</h2>
        <div class="options">
            <p>å†°å¡Š: <span id="ice-option"></span></p>
            <p>ç³–åº¦: <span id="sugar-option"></span></p>
            <p>åŠ æ–™: <span id="add-option"></span></p>
        </div>
      
	
    
        <div class="content">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; width: 100%; flex-wrap: wrap;">
                <!-- å†°å¡Šï¼ˆæœ€å·¦é‚Šï¼‰ -->
                <div style="flex: 1; min-width: 100px; max-width: 33%; display: flex; flex-direction: column; align-items: flex-start;">
                    <h3 style="margin: 0; text-align: left;">å†°å¡Š</h3>
                    <select id="å†°å¡Šé¸æ“‡" style="margin-top: 5px; width: 90%;" onchange="document.getElementById('å†°å¡Šæ•¸å­—').style.display = this.value === 'æ•¸å­—' ? 'inline' : 'none'">
                        <option value="å°–">å°–</option>
                        <option value="å¹³">å¹³</option>
                        <option value="æ•¸å­—">å¡«å…¥æ•¸å­—</option>
                    </select>
                    <input type="number" id="å†°å¡Šæ•¸å­—" style="display: none; margin-top: 5px; width: 90%;" placeholder="è¼¸å…¥æ•¸å­—">
                </div>
    
                <!-- ç”œåº¦ï¼ˆæ­£ä¸­é–“ï¼‰ -->
                <div style="flex: 1; min-width: 100px; max-width: 33%; display: flex; flex-direction: column; align-items: center;">
                    <h3 style="margin: 0; text-align: left; width: 90%;">ç”œåº¦</h3>
                    <input type="number" id="ç”œåº¦" min="0" max="100" placeholder="è¼¸å…¥ç”œåº¦" style="margin-top: 5px; width: 90%;">
                </div>
    
                <!-- æª”é€Ÿï¼ˆæœ€å³é‚Šï¼‰ -->
                <div style="flex: 1; min-width: 100px; max-width: 33%; display: flex; flex-direction: column; align-items: flex-end;">
                    <h3 style="margin: 0; text-align: left; width: 90%;">æª”é€Ÿ</h3>
                    <input type="number" id="æª”é€Ÿ" min="0" max="100" placeholder="è¼¸å…¥æª”é€Ÿ" style="margin-top: 5px; width: 90%;">
                </div>
            </div>
    
            <div>
                <h3>èŒ¶æ¹¯</h3>
                <input type="number" id="èŒ¶æ¹¯_èŒ¶" placeholder="èŒ¶: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_æ°´" placeholder="æ°´: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_æ¥Šæ¡ƒ" placeholder="æ¥Šæ¡ƒ: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_å†¬ç“œ" placeholder="å†¬ç“œ: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_è±†æ¼¿" placeholder="è±†æ¼¿: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_ç”˜è”—" placeholder="ç”˜è”—: è¼¸å…¥æ•¸å­—"> 
                <input type="number" id="èŒ¶æ¹¯_æª¸æª¬" placeholder="æª¸æª¬: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_æŸšå­" placeholder="æŸšå­: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_æŸ³ä¸" placeholder="æŸ³ä¸: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_è˜‹æœ" placeholder="è˜‹æœ: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_é³³æ¢¨" placeholder="é³³æ¢¨: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_è‘¡è„" placeholder="è‘¡è„: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_å¥¶ç²¾" placeholder="å¥¶ç²¾: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_é®®å¥¶" placeholder="é®®å¥¶: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_æ¿ƒä¹³" placeholder="æ¿ƒä¹³: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_èœœ" placeholder="èœœ: è¼¸å…¥æ•¸å­—">
                <input type="number" id="èŒ¶æ¹¯_å·§å…‹åŠ›æ°´" placeholder="å·§å…‹åŠ›æ°´: è¼¸å…¥æ•¸å­—">
            </div>
    
            <div style="display: flex; gap: 20px;">
    <div>
        <h3>æ¢ä»¶</h3>
        <label><input type="radio" name="æ¢ä»¶" value="èŒ¶"> èŒ¶</label>
        <label><input type="radio" name="æ¢ä»¶" value="æ°´"> æ°´</label>
        <label><input type="radio" name="æ¢ä»¶" value="å„åŠ"> å„åŠ</label>
    </div>

    <div>
        <h3>æ¯å…§å‰¯æ–™</h3>
        <select id="æ¯å…§å‰¯æ–™">
            <option value="ç„¡">ç„¡</option>
            <option value="æª¸æª¬ 30 (å›æ”¾)">æª¸æª¬ 30 (å›æ”¾)</option>
            <option value="çç  140Â±5 å…‹">çç  140Â±5 å…‹</option>
            <option value="ç™¾é¦™ 60">ç™¾é¦™ 60</option>
            <option value="æª¸æª¬ 50 (å›æ”¾)">æª¸æª¬ 50 (å›æ”¾)</option>
            <option value="è˜†è–ˆ 80Â±5g">è˜†è–ˆ 80Â±5g</option>
            <option value="ç´…æŸš 150">ç´…æŸš 150</option>
            <option value="è˜†è–ˆ 110Â±5g">è˜†è–ˆ 110Â±5g</option>
            <option value="èœœæ¡ƒ 100">èœœæ¡ƒ 100</option>
        </select>
    </div>
</div>

            
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="checkAnswer()" style="padding: 10px 20px; font-size: 18px; border-radius: 8px; background-color: #4CAF50; color: white; border: none; cursor: pointer;">
                    æäº¤
                </button>
            </div>
        </div>
</div>
</body>
</html>
